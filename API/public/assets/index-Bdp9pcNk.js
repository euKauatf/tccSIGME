import{r as a,u as N,b,t as w,j as e,w as v}from"./index-ClLVAdQ7.js";function L(){const[l,m]=a.useState([]),[u,c]=a.useState(!0),[i,n]=a.useState(null),o=N(),{isAdmin:t}=b(),r=a.useCallback(async()=>{c(!0);try{const s=await w();m(s.data),n(null)}catch(s){console.error("Erro ao carregar locais:",s),n("Não foi possível carregar a lista de locais.")}finally{c(!1)}},[]);a.useEffect(()=>{r()},[r]);const f=()=>{o("/locais/add")},h=s=>{o(`/locais/edit/${s}`)},p=async s=>{var d,x;if(window.confirm("Tem certeza de que deseja excluir este local?"))try{await v(s),alert("Local excluído com sucesso!"),r()}catch(g){const j=((x=(d=g.response)==null?void 0:d.data)==null?void 0:x.message)||"Ocorreu um erro ao excluir.";alert(`Não foi possível excluir: ${j}`)}};return u?e.jsx("p",{className:"p-8 text-center",children:"A carregar locais..."}):i?e.jsx("p",{className:"p-8 text-center text-red-500",children:i}):t?e.jsxs("div",{className:"flex flex-col items-center w-full min-h-screen p-4 font-sans main sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between w-full max-w-4xl mb-8",children:[e.jsx("h1",{className:"text-5xl font-bold text-emerald-800",children:"Administrar Locais"}),t&&e.jsx("button",{onClick:f,className:"btn btn-success",children:"Adicionar Local"})]}),e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"flex flex-col divp rounded-[20px] p-6 bg-emerald-50 shadow-lg",children:[e.jsx("h2",{className:"py-3 text-3xl text-center md:text-4xl text-emerald-600",children:"Lista de Locais"}),l.length>0?e.jsx("ul",{className:"flex flex-col pb-6 gap-y-2",children:l.map(s=>e.jsx("li",{className:"transition-shadow bg-white rounded-lg shadow-md divp hover:shadow-lg",children:e.jsxs("div",{className:"flex flex-col items-start justify-between p-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-lg font-bold text-gray-800",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Capacidade:"})," ",s.capacidade]})]}),t&&e.jsxs("div",{className:"flex self-end gap-2 mt-4 sm:self-center sm:mt-0",children:[e.jsx("button",{onClick:()=>h(s.id),className:"btn btn-sm btn-success",children:"Modificar"}),e.jsx("button",{onClick:()=>p(s.id),className:"btn btn-sm btn-error",children:"Excluir"})]})]})},s.id))}):e.jsx("p",{className:"py-8 text-center text-gray-500",children:"Nenhum local registrado."})]})})]}):e.jsx("p",{className:"p-8 text-center",children:"Você não tem permissão para visualizar esta página."})}export{L as default};
